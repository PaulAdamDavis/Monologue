{"version":3,"file":"lightbox.js","names":["lightbox","trigger","buildItemObject","element","src","getAttribute","msrc","w","h","el","document","querySelectorAll","forEach","addEventListener","e","preventDefault","items","index","prevSibling","target","closest","previousElementSibling","classList","contains","prevItems","item","push","concat","reachedCurrentItem","nextSibling","nextElementSibling","pswpElement","options","bgOpacity","closeOnScroll","fullscreenEl","history","shareEl","zoomEl","getThumbBoundsFn","thumbnail","pageYScroll","window","pageYOffset","documentElement","scrollTop","rect","getBoundingClientRect","x","left","y","top","width","PhotoSwipe","PhotoSwipeUI_Default","init","onThumbnailsClick","selector","add"],"sources":["lightbox.js"],"sourcesContent":["const lightbox = (trigger) => {\n\n    const buildItemObject = (element) => {\n        return {\n            src: element.getAttribute('src'),\n            msrc: element.getAttribute('src'),\n            w: element.getAttribute('width'),\n            h: element.getAttribute('height'),\n            el: element,\n        }\n    };\n\n    const onThumbnailsClick = (e) =>{\n        e.preventDefault();\n\n        let items = [];\n        let index = 0;\n\n        let prevSibling = e.target.closest('.kg-card').previousElementSibling;\n\n        while (prevSibling && (prevSibling.classList.contains('kg-image-card') || prevSibling.classList.contains('kg-gallery-card'))) {\n            let prevItems = [];\n\n            prevSibling.querySelectorAll('img').forEach((item) => {\n                prevItems.push(buildItemObject(item));\n                index += 1;\n            });\n            prevSibling = prevSibling.previousElementSibling;\n\n            items = prevItems.concat(items);\n        };\n\n        if (e.target.classList.contains('kg-image')) {\n            items.push(buildItemObject(e.target));\n        } else {\n            let reachedCurrentItem = false;\n\n            e.target.closest('.kg-gallery-card').querySelectorAll('img').forEach((item) => {\n                items.push(buildItemObject(item));\n\n                if (!reachedCurrentItem && item !== e.target) {\n                    index += 1;\n                } else {\n                    reachedCurrentItem = true;\n                }\n            });\n        };\n\n        let nextSibling = e.target.closest('.kg-card').nextElementSibling;\n\n        while (nextSibling && (nextSibling.classList.contains('kg-image-card') || nextSibling.classList.contains('kg-gallery-card'))) {\n            nextSibling.querySelectorAll('img').forEach((item) => {\n                items.push(buildItemObject(item));\n            });\n            nextSibling = nextSibling.nextElementSibling;\n        };\n\n        const pswpElement = document.querySelectorAll('.pswp')[0];\n\n        const options = {\n            bgOpacity: 0.9,\n            closeOnScroll: true,\n            fullscreenEl: false,\n            history: false,\n            index: index,\n            shareEl: false,\n            zoomEl: false,\n            getThumbBoundsFn: function(index) {\n                const thumbnail = items[index].el,\n                    pageYScroll = window.pageYOffset || document.documentElement.scrollTop,\n                    rect = thumbnail.getBoundingClientRect();\n\n                return {\n                    x: rect.left,\n                    y: rect.top + pageYScroll,\n                    w: rect.width\n                };\n            }\n        };\n\n        const gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);\n\n        gallery.init();\n\n        return false;\n    };\n\n    const triggers = document.querySelectorAll(trigger);\n\n    triggers.forEach((trigger) => {\n        trigger.addEventListener('click', (e) => {\n            onThumbnailsClick(e);\n        });\n    });\n}\n\n(function () {\n    const selector = '.kg-image-card > .kg-image[width][height], .kg-gallery-image > img';\n\n    lightbox(selector);\n\n    document.querySelectorAll(selector).forEach((item) => {\n        item.classList.add('will-open-in-lightbox');\n    });\n})();\n"],"mappings":"AAAA,MAAMA,SAAYC,IAEd,MAAMC,EAAmBC,IACd,CACHC,IAAKD,EAAQE,aAAa,OAC1BC,KAAMH,EAAQE,aAAa,OAC3BE,EAAGJ,EAAQE,aAAa,SACxBG,EAAGL,EAAQE,aAAa,UACxBI,GAAIN,IA+EKO,SAASC,iBAAiBV,GAElCW,SAASX,IACdA,EAAQY,iBAAiB,SAAUC,IA9Eb,CAACA,IACvBA,EAAEC,iBAEF,IAAIC,EAAQ,GACRC,EAAQ,EAERC,EAAcJ,EAAEK,OAAOC,QAAQ,YAAYC,uBAE/C,KAAOH,IAAgBA,EAAYI,UAAUC,SAAS,kBAAoBL,EAAYI,UAAUC,SAAS,qBAAqB,CAC1H,IAAIC,EAAY,GAEhBN,EAAYP,iBAAiB,OAAOC,SAASa,IACzCD,EAAUE,KAAKxB,EAAgBuB,IAC/BR,GAAS,KAEbC,EAAcA,EAAYG,uBAE1BL,EAAQQ,EAAUG,OAAOX,GAG7B,GAAIF,EAAEK,OAAOG,UAAUC,SAAS,YAC5BP,EAAMU,KAAKxB,EAAgBY,EAAEK,aAC1B,CACH,IAAIS,GAAqB,EAEzBd,EAAEK,OAAOC,QAAQ,oBAAoBT,iBAAiB,OAAOC,SAASa,IAClET,EAAMU,KAAKxB,EAAgBuB,IAEtBG,GAAsBH,IAASX,EAAEK,OAGlCS,GAAqB,EAFrBX,GAAS,KAOrB,IAAIY,EAAcf,EAAEK,OAAOC,QAAQ,YAAYU,mBAE/C,KAAOD,IAAgBA,EAAYP,UAAUC,SAAS,kBAAoBM,EAAYP,UAAUC,SAAS,qBACrGM,EAAYlB,iBAAiB,OAAOC,SAASa,IACzCT,EAAMU,KAAKxB,EAAgBuB,OAE/BI,EAAcA,EAAYC,mBAG9B,MAAMC,EAAcrB,SAASC,iBAAiB,SAAS,GAEjDqB,EAAU,CACZC,UAAW,GACXC,eAAe,EACfC,cAAc,EACdC,SAAS,EACTnB,MAAOA,EACPoB,SAAS,EACTC,QAAQ,EACRC,iBAAkB,SAAStB,GACvB,MAAMuB,EAAYxB,EAAMC,GAAOR,GAC3BgC,EAAcC,OAAOC,aAAejC,SAASkC,gBAAgBC,UAC7DC,EAAON,EAAUO,wBAErB,MAAO,CACHC,EAAGF,EAAKG,KACRC,EAAGJ,EAAKK,IAAMV,EACdlC,EAAGuC,EAAKM,SAKJ,IAAIC,WAAWtB,EAAauB,qBAAsBtC,EAAOgB,GAEjEuB,QASJC,CAAkB1C,WAK9B,WACI,MAAM2C,EAAW,qEAEjBzD,SAASyD,GAET/C,SAASC,iBAAiB8C,GAAU7C,SAASa,IACzCA,EAAKH,UAAUoC,IAAI,4BAN3B"}